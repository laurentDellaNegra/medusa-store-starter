---
import SectionHeader from "./SectionHeader.astro";
---

<section class="newsletter-section" id="contact">
  <div class="newsletter-inner">
    <SectionHeader
      tag="Stay Connected"
      title="Join the <em>Rafia</em> World"
      centered
    />
    <p class="newsletter-desc reveal reveal-delay-2">
      Be the first to discover new collections, artisan stories, and exclusive offers.
    </p>
    <div class="newsletter-form reveal reveal-delay-3">
      <input
        type="email"
        class="newsletter-input"
        placeholder="Your email address"
        id="newsletterInput"
      />
      <button class="newsletter-btn" id="newsletterBtn">Subscribe</button>
    </div>
  </div>
</section>

<script>
  const btn = document.getElementById("newsletterBtn") as HTMLButtonElement;
  const inp = document.getElementById("newsletterInput") as HTMLInputElement;
  if (btn && inp) {
    btn.addEventListener("click", () => {
      if (inp.value && inp.value.includes("@")) {
        btn.textContent = "Merci!";
        btn.style.background = "var(--color-sage)";
        btn.style.borderColor = "var(--color-sage)";
        inp.value = "";
        setTimeout(() => {
          btn.textContent = "Subscribe";
          btn.style.background = "";
          btn.style.borderColor = "";
        }, 3000);
      }
    });
  }
</script>

<style>
  .newsletter-section {
    padding: 8rem 4rem;
    background: var(--color-sand-pale);
  }

  .newsletter-inner {
    max-width: var(--size-content-lg);
    margin-inline: auto;
    text-align: center;
  }

  .newsletter-desc {
    font-size: var(--fs-body);
    line-height: var(--lh-loose);
    color: var(--color-espresso-soft);
    text-align: center;
  }

  .newsletter-form {
    display: flex;
    flex-direction: column;
    gap: 0;
    margin-top: 2.5rem;
    max-width: var(--size-content-sm);
    margin-inline: auto;
  }

  @media (min-width: 768px) {
    .newsletter-form {
      flex-direction: row;
    }
  }

  .newsletter-input {
    flex: 1;
    padding: 1rem 1.5rem;
    border: 1px solid var(--color-sand);
    border-bottom: none;
    background: var(--color-white);
    font-family: var(--font-body);
    font-size: var(--fs-body-sm);
    color: var(--color-espresso);
    outline: none;
    transition: border-color 0.3s;
  }

  .newsletter-input::placeholder {
    color: var(--color-gold-light);
  }

  .newsletter-input:focus {
    border-color: var(--color-gold);
  }

  @media (min-width: 768px) {
    .newsletter-input {
      border-right: none;
      border-bottom: 1px solid var(--color-sand);
    }
  }

  .newsletter-btn {
    padding: 1rem 2.5rem;
    background: var(--color-espresso);
    color: var(--color-sand-light);
    font-family: var(--font-body);
    font-size: var(--fs-caption);
    letter-spacing: var(--ls-wider);
    text-transform: uppercase;
    border: 1px solid var(--color-espresso);
    cursor: pointer;
    transition: all 0.4s;
    white-space: nowrap;
  }

  .newsletter-btn:hover {
    background: var(--color-gold);
    border-color: var(--color-gold);
  }
</style>
