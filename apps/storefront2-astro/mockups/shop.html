<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Collection â€” Rafia</title>
<link rel="stylesheet" href="shared.css">
<style>
  .shop-hero {
    padding: 10rem 4rem 4rem; text-align: center;
    background: var(--sand-pale); position: relative; overflow: hidden;
  }
  .shop-hero::before {
    content: ''; position: absolute; top: -100px; left: 50%; transform: translateX(-50%);
    width: 800px; height: 400px; border-radius: 50%;
    background: radial-gradient(ellipse, rgba(184,149,106,0.08) 0%, transparent 70%);
  }
  .shop-hero .section-tag { justify-content: center; }
  .shop-hero .section-title { text-align: center; margin-bottom: 1rem; }
  .shop-hero-desc { font-size: 0.95rem; line-height: 1.8; color: var(--espresso-soft); max-width: 500px; margin: 0 auto; }

  .filters-bar {
    padding: 2rem 4rem; display: flex; justify-content: space-between; align-items: center;
    max-width: 1400px; margin: 0 auto; border-bottom: 1px solid var(--sand);
  }
  .filters-left { display: flex; gap: 0.5rem; flex-wrap: wrap; }
  .filter-btn {
    padding: 0.55rem 1.5rem; border: 1px solid var(--sand); background: transparent;
    font-family: 'Outfit', sans-serif; font-size: 0.7rem; letter-spacing: 0.15em;
    text-transform: uppercase; color: var(--espresso-soft); cursor: pointer; transition: all 0.3s ease;
  }
  .filter-btn:hover { border-color: var(--gold); color: var(--espresso); }
  .filter-btn.active { background: var(--espresso); color: var(--sand-light); border-color: var(--espresso); }
  .sort-select {
    padding: 0.55rem 2.5rem 0.55rem 1.2rem; border: 1px solid var(--sand); background: white;
    font-family: 'Outfit', sans-serif; font-size: 0.7rem; letter-spacing: 0.1em;
    color: var(--espresso-soft); cursor: pointer; appearance: none; outline: none;
    background-image: url("data:image/svg+xml,%3Csvg width='10' height='6' viewBox='0 0 10 6' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1 1L5 5L9 1' stroke='%234A3228' stroke-width='1'/%3E%3C/svg%3E");
    background-repeat: no-repeat; background-position: right 1rem center;
  }
  .results-count {
    font-size: 0.7rem; letter-spacing: 0.1em; color: var(--espresso-soft);
    padding: 2.5rem 4rem 0; max-width: 1400px; margin: 0 auto;
  }

  .shop-grid {
    display: grid; grid-template-columns: repeat(3, 1fr); gap: 3rem 2.5rem;
    max-width: 1400px; margin: 0 auto; padding: 2.5rem 4rem 8rem;
  }
  .product-card {
    position: relative; cursor: pointer; text-decoration: none; color: var(--espresso); display: block;
    opacity: 0; transform: translateY(30px); animation: cardIn 0.6s ease forwards;
  }
  .product-card:nth-child(1) { animation-delay: 0.05s; }
  .product-card:nth-child(2) { animation-delay: 0.1s; }
  .product-card:nth-child(3) { animation-delay: 0.15s; }
  .product-card:nth-child(4) { animation-delay: 0.2s; }
  .product-card:nth-child(5) { animation-delay: 0.25s; }
  .product-card:nth-child(6) { animation-delay: 0.3s; }
  @keyframes cardIn { to { opacity: 1; transform: translateY(0); } }

  .product-image { aspect-ratio: 3/4; position: relative; overflow: hidden; margin-bottom: 1.5rem; }
  .product-bg { position: absolute; inset: 0; transition: transform 0.8s ease; }
  .product-card:hover .product-bg { transform: scale(1.05); }
  .product-shape { position: absolute; inset: 0; display: flex; align-items: center; justify-content: center; z-index: 1; }
  .product-shape svg { width: 50%; height: auto; filter: drop-shadow(0 15px 40px rgba(44,24,16,0.15)); transition: transform 0.6s ease; }
  .product-card:hover .product-shape svg { transform: translateY(-8px) rotate(-2deg); }
  .product-badge { position: absolute; top: 1.2rem; left: 1.2rem; padding: 0.4rem 1rem; background: rgba(255,252,247,0.9); backdrop-filter: blur(10px); font-size: 0.6rem; letter-spacing: 0.2em; text-transform: uppercase; color: var(--gold); z-index: 2; }
  .product-add-btn {
    position: absolute; bottom: 1.5rem; left: 50%; transform: translateX(-50%) translateY(20px);
    padding: 0.75rem 2rem; background: var(--espresso); color: var(--sand-light);
    font-family: 'Outfit', sans-serif; font-size: 0.65rem; letter-spacing: 0.2em;
    text-transform: uppercase; border: none; cursor: pointer;
    opacity: 0; transition: all 0.4s ease; z-index: 2; white-space: nowrap;
  }
  .product-card:hover .product-add-btn { opacity: 1; transform: translateX(-50%) translateY(0); }
  .product-add-btn:hover { background: var(--gold); }
  .product-name { font-family: 'Cormorant Garamond', serif; font-size: 1.4rem; font-weight: 400; margin-bottom: 0.3rem; }
  .product-meta { display: flex; justify-content: space-between; align-items: center; }
  .product-type { font-size: 0.7rem; letter-spacing: 0.15em; text-transform: uppercase; color: var(--espresso-soft); }
  .product-price { font-family: 'Cormorant Garamond', serif; font-size: 1.2rem; color: var(--gold); }

  .no-results {
    grid-column: 1/-1; text-align: center; padding: 4rem 0;
    font-family: 'Cormorant Garamond', serif; font-size: 1.5rem; color: var(--espresso-soft);
  }

  @media (max-width: 1024px) {
    .shop-grid { grid-template-columns: repeat(2, 1fr); padding: 2rem 3rem 6rem; }
    .filters-bar { padding: 1.5rem 3rem; flex-wrap: wrap; gap: 1rem; }
  }
  @media (max-width: 768px) {
    .shop-hero { padding: 7rem 2rem 3rem; }
    .shop-grid { grid-template-columns: 1fr; max-width: 400px; padding: 2rem 2rem 5rem; }
    .filters-bar { padding: 1.2rem 2rem; }
    .results-count { padding: 2rem 2rem 0; }
    .filters-left { gap: 0.4rem; }
    .filter-btn { padding: 0.45rem 1rem; font-size: 0.6rem; }
  }
</style>
</head>
<body>
<div class="grain"></div>
<div class="cursor-dot" id="cursorDot"></div>
<div class="cursor-ring" id="cursorRing"></div>

<nav id="navbar" class="nav-light">
  <a href="index.html" class="logo">Rafia<span>.</span></a>
  <ul class="nav-center">
    <li><a href="shop.html" style="color:var(--gold)">Collection</a></li>
    <li><a href="index.html#story">Our Story</a></li>
    <li><a href="index.html#values">Savoir-Faire</a></li>
    <li><a href="index.html#contact">Contact</a></li>
  </ul>
  <div class="nav-right">
    <a href="cart.html" class="cart-icon" title="Shopping Bag">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M6 2L3 6v14a2 2 0 002 2h14a2 2 0 002-2V6l-3-4z"/><line x1="3" y1="6" x2="21" y2="6"/><path d="M16 10a4 4 0 01-8 0"/></svg>
      <span class="cart-count" style="display:none;">0</span>
    </a>
    <div class="menu-toggle" id="menuToggle"><span></span><span></span><span></span></div>
  </div>
</nav>

<section class="shop-hero">
  <p class="section-tag">The Collection</p>
  <h1 class="section-title">Our <em>Bags</em></h1>
  <p class="shop-hero-desc">Each piece is a unique creation, hand-woven by Malagasy artisans from sustainably harvested raphia palm fibre.</p>
</section>

<div class="filters-bar">
  <div class="filters-left">
    <button class="filter-btn active" data-filter="all">All</button>
    <button class="filter-btn" data-filter="Tote Bag">Totes</button>
    <button class="filter-btn" data-filter="Clutch">Clutches</button>
    <button class="filter-btn" data-filter="Crossbody">Crossbody</button>
    <button class="filter-btn" data-filter="Beach Bag">Beach</button>
    <button class="filter-btn" data-filter="Mini Bag">Mini</button>
    <button class="filter-btn" data-filter="Bucket Bag">Bucket</button>
  </div>
  <select class="sort-select" id="sortSelect">
    <option value="featured">Sort: Featured</option>
    <option value="price-asc">Price: Low to High</option>
    <option value="price-desc">Price: High to Low</option>
    <option value="name">Name: A to Z</option>
  </select>
</div>

<p class="results-count" id="resultsCount"></p>
<div class="shop-grid" id="shopGrid"></div>

<footer>
  <div class="footer-top">
    <div class="footer-brand"><a href="index.html" class="logo">Rafia<span>.</span></a><p class="footer-desc">Artisanal raphia bags, handcrafted in Madagascar.</p></div>
    <div><p class="footer-heading">Shop</p><ul class="footer-links"><li><a href="shop.html">All Bags</a></li><li><a href="shop.html">Totes</a></li><li><a href="shop.html">Clutches</a></li></ul></div>
    <div><p class="footer-heading">About</p><ul class="footer-links"><li><a href="index.html#story">Our Story</a></li><li><a href="#">Artisans</a></li><li><a href="#">Sustainability</a></li></ul></div>
    <div><p class="footer-heading">Help</p><ul class="footer-links"><li><a href="#">Shipping</a></li><li><a href="#">Returns</a></li><li><a href="#">Care Guide</a></li></ul></div>
  </div>
  <div class="footer-bottom"><span>&copy; 2025 Rafia. All rights reserved.</span><div class="footer-social"><a href="#">Instagram</a><a href="#">Pinterest</a><a href="#">Facebook</a></div></div>
</footer>

<script src="products.js"></script>
<script src="shared.js"></script>
<script>
  let currentFilter = 'all';
  let currentSort = 'featured';
  const grid = document.getElementById('shopGrid');
  const countEl = document.getElementById('resultsCount');

  function renderProducts() {
    let items = [...PRODUCTS];
    if (currentFilter !== 'all') items = items.filter(p => p.type === currentFilter);
    if (currentSort === 'price-asc') items.sort((a,b) => a.price - b.price);
    else if (currentSort === 'price-desc') items.sort((a,b) => b.price - a.price);
    else if (currentSort === 'name') items.sort((a,b) => a.name.localeCompare(b.name));

    countEl.textContent = `Showing ${items.length} piece${items.length !== 1 ? 's' : ''}`;
    grid.innerHTML = '';
    if (items.length === 0) {
      grid.innerHTML = '<div class="no-results">No bags found in this category.</div>';
      return;
    }
    items.forEach(p => {
      const card = document.createElement('a');
      card.href = 'product.html?id=' + p.id;
      card.className = 'product-card';
      card.innerHTML = `
        <div class="product-image">
          <div class="product-bg" style="background:${p.gradient}"></div>
          <div class="product-shape">${p.svg}</div>
          ${p.badge ? `<span class="product-badge">${p.badge}</span>` : ''}
          <button class="product-add-btn">Add to Bag</button>
        </div>
        <div class="product-meta">
          <div><h3 class="product-name">${p.name}</h3><p class="product-type">${p.type} &mdash; ${p.color}</p></div>
          <span class="product-price">CHF ${p.price}</span>
        </div>`;
      card.querySelector('.product-add-btn').addEventListener('click', e => {
        e.preventDefault(); e.stopPropagation();
        RafiaCart.add({ id: p.id, name: p.name, price: p.price, type: p.type, color: p.color, gradient: p.gradient, svg: p.svg });
      });
      grid.appendChild(card);
    });
  }

  // Filter buttons
  document.querySelectorAll('.filter-btn').forEach(btn => {
    btn.addEventListener('click', () => {
      document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
      btn.classList.add('active');
      currentFilter = btn.dataset.filter;
      renderProducts();
    });
  });

  // Sort
  document.getElementById('sortSelect').addEventListener('change', e => {
    currentSort = e.target.value;
    renderProducts();
  });

  renderProducts();
</script>
</body>
</html>
